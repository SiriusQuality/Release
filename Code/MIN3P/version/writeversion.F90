!*****Revision Informations Automatically Generated by VisualSVN*****!
!---------------------------------------------------------------------
!> $ID:$
!> $Revision: 453 $
!> $Author: dsu $
!> $Date: 2017-02-21 19:54:05 +0100 (Tue, 21 Feb 2017) $
!> $URL: https://biot.eos.ubc.ca/svn/min3p_thcm/branches/fgerard_new/src/version/writeversion.F90 $
!---------------------------------------------------------------------
!********************************************************************!

!> module: writeversion
module writeversion

use Version

implicit none

    contains
    
    !> write version information to file
    !> iunit: file unit
    !> strcomment: comment characters
    subroutine writeversion2file(iunit, strcomment)
    
        implicit none
        
        integer, intent(in)         :: iunit        !file unit
        character(*), intent(in)    :: strcomment   !comment characters
        character(2048)             :: strBuildLabel
        
        write(iunit, "(2a)") trim(adjustl(strcomment)), "Program     : MIN3P_THCm." 
        
        write(iunit, "(2a,3(a,'.'),a)") trim(adjustl(strcomment)), "Version     : ",          &
                                        trim(MajorVersionNumber), trim(MinorVersionNumber),   &
                                        trim(GlobalRevisionNumber), trim(BuildVersionNumber)
        
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Commit date : ", trim(CommitDate)
        
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Build date  : ", trim(BuildDate)
        
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Repository  : ", trim(RepositoryURL)
       
!> Platform information   
        strBuildLabel = ""
#ifdef DEBUG_WIN32
        strBuildLabel = "Debug_Win32"
#elif DEBUG_X64
        strBuildLabel = "Debug_X64"
#elif RELEASE_WIN32
        strBuildLabel = "Release_Win32"
#elif RELEASE_X64
        strBuildLabel = "Release_X64"
#else
        strBuildLabel = "NOT DEFINED"
#endif
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Platform    : ", trim(strBuildLabel)
        
!> System and default solver WS209
        strBuildLabel = ""
#ifdef WINDOWS
        strBuildLabel = "Windows"
#elif LINUX
        strBuildLabel = "Linux"
#else
        strBuildLabel = "Default"
#endif
        write(iunit, "(3a)") trim(adjustl(strcomment)), "System      : ", trim(strBuildLabel)

!> Solver
        strBuildLabel = "WS209"
#ifdef PARDISO
        strBuildLabel = trim(strBuildLabel) //" + Pardiso"
#endif

#ifdef PETSC
        strBuildLabel = trim(strBuildLabel) //" + PETSc"
#endif
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Solver      : ", trim(strBuildLabel)

!> Parallel library
        strBuildLabel = "Sequential"
#ifdef OPENMP
        strBuildLabel = trim(strBuildLabel) // " + OpenMP"
#endif

#ifdef MPI
        strBuildLabel = trim(strBuildLabel) // " + MPI"
#endif

#ifdef HYBRID
        strBuildLabel = trim(strBuildLabel) // " + Hybrid"
#endif
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Parallel    : ", trim(strBuildLabel)

!> Main schedule method
        strBuildLabel = ""
#ifdef SCHEDULE_DYNAMIC
        strBuildLabel = "Dynamic"
#elif SCHEDULE_STATIC
        strBuildLabel = "Static"
#else
        strBuildLabel = "Auto"
#endif

#ifdef OPENMP
        write(iunit, "(3a)") trim(adjustl(strcomment)), "Schedule    : ", trim(strBuildLabel)
#endif
    
    end subroutine writeversion2file

end module writeversion

